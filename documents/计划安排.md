Mohun framework schedule
======================

# 目前现状

- redis目前都是大Key，存的是object对象，CRUD时拿出来直接修改后存放
- 数据落地用的是mongo手动从redis sync数据
- 业务逻辑出问题，会导致服务不断重启，服务不可用

# 时间节点
- 6.19
删档付费测试，预计一周，安卓的taptap、B站平台

- 7月底
正式上线

# 项目目标：
- 不能进不了游戏
- 如果出了故障，需要几分钟内恢复


## 6.19一期方案    
- 加入微服务注册和发现架构，可实时动态伸缩服务个数
    - 5.30完成
    
- config-service的配置管理
    - 5.30完成
    
- monitor-service
指令响应时间统计和次数统计，还有进程cpu、内存使用状况
    - 6.6完成
    
- 启动脚本
    - 6.6完成
    
- gm-service：提供一些监控类数据的增删改查
    - 6.6完成
    
- 快速部署服务：
    - 使用镜像还原主机
    - 代码仓库挂在外网上做云主机的拉取，而非手动ftp上传
    - 6.13完成
      
- DB整改
redis换成redis+mongo，从redis获取数据，如果没有，就从monog拉取，拉取到就存入redis，并设置TTL
    - 6.17完成

### 部署方案
- 目标最高50w同时在线
- 每主机开10个game服务，每个game服务面向2000个客户端，部署在4核16G，单主机2w吞吐量，共25个主机，共250个服务
- 6.15完成



# 客户端需要联动优化掉
- 客户端请求可能1秒重发需要客户端后续fix
- 客户端请求超时没有回来，或服务端给了个特定的statusCode，就需要重新申请一个game服务地址
- gateway按当前game服务实际负载给出一个game服务，提供给客户端使用
- 客户端请求添加messageID字段，服务端对重复请求做过滤





